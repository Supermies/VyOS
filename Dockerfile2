FROM debian:squeeze
#MAINTAINER Chris Bennett <chris@ceegeebee.com>
MAINTAINER Eliezer Croitoru <eliezer@ngtech.co.il>

ENV DEBIAN_FRONTEND noninteractive

ENV PATH="/data/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
RUN apt-get update \
    && apt-get install -y wget \
    

RUN echo 'Acquire::Check-Valid-Until "false";' >/etc/apt/apt.conf.d/90ignore-release-date && apt-get update \
    && apt-get -y install debian-archive-keyring \
    && apt-get install -y wget \
    && wget -O - http://wiki.vyos.net/so3group_maintainers.key | apt-key add - \
    && echo "deb http://archive.debian.org/debian-backports/ squeeze-backports main" > /etc/apt/sources.list.d/bp.list \
    && echo "deb http://archive.debian.org/debian squeeze main" > /etc/apt/sources.list.d/bp.list \
    && echo "deb http://archive.debian.org/debian squeeze-lts main" > /etc/apt/sources.list.d/bp.list \
    && echo "deb http://security.debian.org/ squeeze/updates main" > /etc/apt/sources.list.d/bp.list \
    && apt-get update \
    && apt-get -t squeeze-backports install -y squashfs-tools \
    && echo "" >/etc/apt/sources.list.d/bp.list \
    && apt-get update

RUN apt-get install -y autoconf dpkg-dev syslinux make lsb-release fakechroot devscripts git dpkg-dev \
    && apt-get install -y live-helper syslinux genisoimage \
    && apt-get install -y kernel-package bash \
    && apt-get install -y git autoconf automake dpkg-dev live-helper syslinux genisoimage \
    && apt-get clean


# used while image still in dev
#RUN apt-get -y install vim

#RUN mkdir -p /data; cd /data; git clone https://github.com/vyos/build-iso.git
#RUN mkdir -p /data/bin
#ADD bin/vyos-build-iso /data/bin/vyos-build-iso

#WORKDIR /data/build-iso
#CMD ["/data/bin/vyos-build-iso"]

RUN mkdir /build
WORKDIR /build
